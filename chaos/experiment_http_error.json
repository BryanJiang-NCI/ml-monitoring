{
    "version": "1.0.0",
    "title": "Experiment / Traditional vs AI-based Monitoring",
    "description": "Inject HTTP errors and measure detection/recovery times across systems.",
    "steady-state-hypothesis": {
        "title": "Both systems stable before injection",
        "probes": [
            {
                "type": "probe",
                "name": "check_nginx_health",
                "tolerance": 200,
                "provider": {
                    "type": "http",
                    "url": "http://127.0.0.1:8088"
                }
            }
        ]
    },
    "method": [
        {
            "type": "action",
            "name": "record_injection_time",
            "provider": {
                "type": "process",
                "path": "bash",
                "arguments": "-c 'echo \"inject_start $(python -c \"from datetime import datetime, timezone; print(datetime.now(timezone.utc).isoformat())\")\" > chaos/result/benchmark_http.log'"
            }
        },
        {
            "type": "action",
            "name": "inject_http_error",
            "provider": {
                "type": "process",
                "path": "bash",
                "arguments": "-c 'for i in {1..8}; do curl -s http://127.0.0.1:8088/error > /dev/null; sleep 1; done'"
            }
        },
        {
            "type": "probe",
            "name": "detect_prometheus_alert",
            "background": true,
            "provider": {
                "type": "process",
                "path": "python",
                "arguments": "chaos/probe_prometheus.py detect HighErrorRate >> chaos/result/benchmark_http.log"
            }
        },
        {
            "type": "probe",
            "name": "detect_ai_alert",
            "background": true,
            "provider": {
                "type": "process",
                "path": "python",
                "arguments": "chaos/probe_ai_monitor.py detect /error >> chaos/result/benchmark_http.log"
            }
        },
        {
            "type": "probe",
            "name": "recover_prometheus",
            "background": true,
            "provider": {
                "type": "process",
                "path": "python",
                "arguments": "chaos/probe_prometheus.py recover HighErrorRate >> chaos/result/benchmark_http.log"
            }
        },
        {
            "type": "probe",
            "name": "recover_ai_monitor",
            "background": true,
            "provider": {
                "type": "process",
                "path": "python",
                "arguments": "chaos/probe_ai_monitor.py recover /error >> chaos/result/benchmark_http.log"
            }
        }
    ]
}